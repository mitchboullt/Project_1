var tt = gsap.to, tf = gsap.from, tft = gsap.fromTo, td = gsap.delayedCall, ts = gsap.set, tweenDelay = .1;

init = function () {
	container = document.getElementById('container_dc');
	content = document.getElementById('content_dc');
	build_timeline_main();
}

function build_timeline_main() {
	ts("#container_dc", { display: "block" });
	//ts(".cta_roll", {autoAlpha:0, display: "block" })


	function bg1In() {
		var bg1TL = gsap.timeline({ defaults: { duration: 2.9, ease: "none", force3D:"true" } });
				bg1TL.from("#img_container",{scale:1.01, rotation:.1, y:-35},"start")
			return bg1TL;
	}	
	

	var mainTL = gsap.timeline({ defaults: { duration: 1.25, ease: "power4.inOut", force3D:"true" } });
	mainTL
		.add("fr0", "+=0")		
		.add(bg1In,"fr0")
		.to(bgFade, { autoAlpha: 0, overwrite: "none", onComplete: hideBGFade }, "fr0+=.25")
		.from("#card_container", {y:100, stagger:.1, rotation:.01,  force3D:false},"fr0")
		.to("#card_container .card_shine", {stagger:.1,  x:400},"fr0+=.75")

		.add("fr1", "-=1.75")



		.add("fr2", "-=0")
		.from("#blue_bg", {x:364},"fr2+=.1")
		.fromTo("#img1",{scale:1, transformOrigin:"0% 0%",}, {scale:.5, x:0, transformOrigin:"0% 0%", overwrite:"true"},"fr2+=.1")
		.from("#img_mask", {width:970},"fr2+=.1")

		.from("#legal", {autoAlpha:0},"fr2+=.5")
		.from("#copy1 .full_div", {autoAlpha:0, stagger:.05, x:-300},"fr2+=.4")

		.add("fr3", "+=2")
		.to("#copy1 .full_div", {autoAlpha:0, stagger:.05, x:500},"fr3")
		.from("#copy2 .full_div", {autoAlpha:0, stagger:.05, x:-500},"fr3")

		.add("fr4", "+=2")
		.from([".img2",".img3"], {duration:.01, autoAlpha:0},"fr4")

		.to("#img1", {x:-364},"fr4")
		.from(".img2", {x:364},"fr4")
	
		.to("#copy2 .full_div", {autoAlpha:0, stagger:.05, x:500, duration:1},"fr4")
		.from("#copy3 .full_div", {autoAlpha:0, stagger:.05, x:-500},"fr4")

		.add("fr5", "+=2")

		.to(".img2", {x:-364},"fr5")
		.from(".img3", {x:364},"fr5")
		.to("#copy3 .full_div", {autoAlpha:0, stagger:.05, x:500, duration:1},"fr5")
		.from("#copy4 .full_div", {autoAlpha:0, stagger:.05, x:-500},"fr5")


		.from("#cta", {y:20},"fr5+=.5")							
		.to("#legal", {y:-19},"fr5+=.5")							

		.to("#cta .cta_arrow", {duration:.2, x:2, yoyo:true, repeat:3, onComplete: setRoll},"-=.5")
		.fromTo("#card_container .card_shine", {x:0, autoAlpha:.4},{stagger:.1,  x:400},"-=.75")
		
		.add("ef")
		.call(function () { console.log(mainTL.duration()); });
//	mainTL.seek("fr3")
}


hideBGFade = function () {
	bgFade.style.display = "none";
}

//Add Event Listeners
setRoll = function () {
	var x = document.getElementById("bg_exit");
	if (x.addEventListener) {
		// For all major browsers, except IE 8 and earlier
		x.addEventListener('mouseover', bgOverHandler, false);
		x.addEventListener('mouseout', bgOutHandler, false);
	} else {
		// For IE 8 and earlier versions hide rollover effect
	}
}

bgOverHandler = function(e) {
	tft("#cta .cta_arrow", {x:0}, {duration:.2, x:3, yoyo:true, repeat:3, overwrite:"true"});
	tft("#card_container .card_shine", {x:0, autoAlpha:.4},{duration: 1.25, ease: "power4.inOut", x:400})
}
bgOutHandler = function(e) {

	
}

function bgExitHandler(e) {

}


